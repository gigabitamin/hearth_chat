## Warm & Cozy Connection - Hearth Chat
- "I want to create a warm and cozy space around the fireplace, a place where people can gather and share stories in front of the warm flames."  
- ë²½ë‚œë¡œ ì£¼ë³€ì˜ ë”°ëœ»í•˜ê³  ì•„ëŠ‘í•œ ê³µê°„. ìš°ì—°íˆ ëª¨ì—¬ë“  ì‚¬ëŒë“¤ì´ ë”°ëœ»í•œ ë¶ˆê½ƒ ì•ì—ì„œ ì´ì•¼ê¸° ë‚˜ëˆ„ëŠ” ê³µê°„ì„ ë§Œë“¤ê³  ì‹¶ìŠµë‹ˆë‹¤  

==========================================

# 250903
- hearthchat.app ë„ë©”ì¸ ì—°ê²°, cloudflare workers ë¼ìš°íŒ… ì—°ê²°
- cloudtype ì—ì„œ ì»¤ìŠ¤í…€ ë„ë©”ì¸ ì—°ê²°ì´ ì•ˆë˜ëŠ” ê´€ê³„ë¡œ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¡œ ì—°ê²°

# 250830
- ì•ˆë“œë¡œì´ë“œ apk ë¦¬íŒ¨í‚¤ì§•, ë¦´ë¦¬ì¦ˆ ë²„ì „ fix
- css fix, dimm ë¼ì´ë¸ŒëŸ¬ë¦¬ ì˜ì¡´ì„± ë¬¸ì œ fix
- ë„ë©”ì¸ ìŠ¹ì¸ ëŒ€ê¸°

# 250829
- app store ë“±ë¡ ì¤€ë¹„ ë° í…ŒìŠ¤íŠ¸

# 250828 v0.99.51
- android apk package build complete
- adb ì—°ê²°, deubg & release virsion test
- websocket connection fix

# 250827
- cloudflare, freedns, duckdns, ì„œë¸Œë„ë©”ì¸ ë§¤í•‘, netlify-github ì—°ë™ reverse proxy ì‹œë„

# 250826 v0.99.4 test
- cloudtype migrate, supabase db ì—°ê²° ê³„ì¸µì  ë©”ëª¨ë¦¬ í…ŒìŠ¤íŠ¸
- ë¡œì»¬ db postgrsql ì¶”ê°€

# 250818 v0.99.31
- media íŒŒì¼ serve ë¬¸ì œ í•´ê²°

# 250818 v0.99.3
- ë°°ì—´ ê°•ì œ ì½”ë“œì˜ ì ìš© ë²”ìœ„ ì¡°ì ˆ, ì›¹ì†Œì¼“ ë©”ì‹œì§€ ì¶œë ¥ ìˆœì„œ ê¼¬ì„ ë¬¸ì œ í•´ê²°
- ë¬´í•œ ìŠ¤í¬ë¡¤ì„ ì ìš©í•˜ê¸° ìœ„í•´ ì‘ì„±í•˜ëŠ” ì‹œê°„ ì—­ìˆœ ë°°ì—´ ë¦¬ìŠ¤íŠ¸ ì‘ì„± ì½”ë“œ ì¬êµ¬ì¶•
- ë¡œì»¬ ê°œë°œì„œë²„ ì ‘ì† ëª¨ë“œ ê°œì„ , ê°™ì€ NAT ë‚´ë¶€ IPë¥¼ ì‚¬ìš©í•˜ëŠ” ê¸°ê¸°ì—ì„œ ë¡œê·¸ì¸, ì›¹ì†Œì¼“ ì •ìƒ ì ‘ì†
- íšŒì›ê°€ì… ì˜¤ë¥˜ ìˆ˜ì •, ì»¤ìŠ¤í…€ íšŒì›ê°€ì… ë·° ì¶”ê°€
- ì´ë¯¸ì§€ ë‹¤ì¤‘ ì²¨ë¶€ ì˜¤ë¥˜ ìˆ˜ì •, ì¦ê²¨ì°¾ê¸° ì˜¤ë¥˜ ìˆ˜ì •

# 250817
- ì„œë²„ ì´ì „ ì‘ì—… ë° ê¸°ëŠ¥ ì¶”ê°€, ëª¨ë“ˆ ë¶„ë¦¬ ë“±ìœ¼ë¡œ ì¸í•œ ì˜¤ë¥˜ë“¤ fix, ë¶€ë¶„ ë¦¬íŒ©í† ë§ë§

# 250816
- fly io migrations ì™„ë£Œ
- ë©”ì¸ ì•±ê³¼ redis ì„œë²„ëŠ” nrt(ë„ì¿„), postgres db ì„œë²„ëŠ” syd(ì‹œë“œë‹ˆ(í˜¸ì£¼))
- fly io ì˜ postgres ì„œë¹„ìŠ¤ ì§€ì—­ì´ ì •í•´ì ¸ ìˆëŠ” ê´€ê³„ë¡œ ê·¸ë‚˜ë§ˆ ê°€ì¥ ê°€ê¹Œìš´ ì‹œë“œë‹ˆ ì„ íƒ
- ì›¹ì†Œì¼“ ë°˜ì‘ ì†ë„ë¥¼ ê³ ë ¤í•´ ë©”ì¸ì•±ê³¼ redis ì„œë²„ëŠ” ê°™ì€ nrt ì— ìœ„ì¹˜

# 250815 v0.99.2
- fly io migrations, redis ì„œë²„ ë¶„ë¦¬, 4ê°œ ì„œë²„ ê°ê° í™˜ê²½ë³„ í…ŒìŠ¤íŠ¸
- redis tls off test -> success

# 250814
- render github ci/cd ì—ì„œ ë°°í¬ë°©ì‹ í…ŒìŠ¤íŠ¸(github actions, dockerhub image import), fly.io ì„œë²„ ì´ì „

## 250813 v0.99.1
- **ìˆ˜ë™ ë°°í¬ ì‹œìŠ¤í…œ ë„ì…**: ë Œë” ë¬´ë£Œ ë¶„ëŸ‰ ì ˆì•½ì„ ìœ„í•œ GitHub Actions ìë™ ë°°í¬ ìš°íšŒ
- camera ëª©ë¡ ì¶œë ¥, ê¸°ì¡´ webcam ì™¸ì— ê°€ìƒì¹´ë©”ë¼ë‚˜ ì•„ë°”íƒ€ í™”ë©´ ë“± ì¶œë ¥ ê°€ëŠ¥, globalinput ì…ë ¥ì°½ ì¹´ë©”ë¼ ì´¬ì˜ í›„ ìë¥´ê¸° ì„ íƒ ë°•ìŠ¤ ìˆ˜ì •(react-easy-crop -> react-image-crop)

### ğŸš€ ë°°í¬ ì‹œìŠ¤í…œ (2025.08.13 ì—…ë°ì´íŠ¸)

#### **ìë™ ë°°í¬ â†’ ìˆ˜ë™ ë°°í¬ ì „í™˜**
- **ì´ìœ **: ë Œë” ë¬´ë£Œ ë¶„ëŸ‰ ì†Œì§„ìœ¼ë¡œ ì¸í•œ ë¹„ìš© ì ˆì•½
- **ë°©ë²•**: GitHub Actions `workflow_dispatch` (ìˆ˜ë™ íŠ¸ë¦¬ê±°) ì‚¬ìš©
- **ì¥ì **: ë¬´ë£Œ ë¶„ëŸ‰ ì ˆì•½, ë°°í¬ ì‹œì  ì œì–´, ì•ˆì „í•œ ë°°í¬

#### **ë°°í¬ ë°©ë²•**
1. **GitHub Actions ìˆ˜ë™ íŠ¸ë¦¬ê±°** (ê¶Œì¥)
   - `Actions` íƒ­ â†’ `Manual Deploy to Render` ì›Œí¬í”Œë¡œìš°
   - `Run workflow` â†’ í™˜ê²½ ì„ íƒ â†’ ì‹¤í–‰

2. **Render ëŒ€ì‹œë³´ë“œ ì§ì ‘ ë°°í¬**
   - https://dashboard.render.com â†’ ì„œë¹„ìŠ¤ ì„ íƒ
   - `Manual Deploy` â†’ `Deploy latest commit`

#### **ë°°í¬ ìŠ¤í¬ë¦½íŠ¸**
```bash
# Windows PowerShell
.\deploy.ps1 [environment] [force_rebuild]

# Linux/Mac
./deploy.sh [environment] [force_rebuild]
```

#### **ìƒì„¸ ê°€ì´ë“œ**
- ğŸ“– [ìˆ˜ë™ ë°°í¬ ê°€ì´ë“œ](MANUAL_DEPLOY_GUIDE.md)
- ğŸ”§ [GitHub Actions ì›Œí¬í”Œë¡œìš°](.github/workflows/deploy.yml)

--- 

### Hearth Chat íŒ¨í‚¤ì§€ êµ¬ì¡° ê°œìš”

ì´ ë¬¸ì„œëŠ” `C:\Project\hearth_chat_project\hearth_chat_package`ì˜ ë””ë ‰í„°ë¦¬ êµ¬ì¡°ì™€ ì£¼ìš” ì»´í¬ë„ŒíŠ¸, ì‹¤í–‰/ë°°í¬, Lily LLM ì—°ë™ í¬ì¸íŠ¸ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.

---

### ìµœìƒìœ„ êµ¬ì„±
- `app.js`, `build.sh`, `Dockerfile`: ë¹Œë“œ/ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ë° ì§„ì…ì (í”„ë¡œì íŠ¸ ê´€ë¦¬ìš©)
- `script/`: ë°°í¬/ì‹¤í–‰ í¸ì˜ ìŠ¤í¬ë¦½íŠ¸
- `hearth_chat_django/`: ë°±ì—”ë“œ (Django + Channels)
- `hearth_chat_react/`: í”„ë¡ íŠ¸ì—”ë“œ (React)
- `hearth_chat_media/`: ì •ì /ì—…ë¡œë“œ ë¯¸ë””ì–´ ê²½ë¡œ(í™˜ê²½ì— ë”°ë¼ ë‹¤ë¦„)

---

### Backend: `hearth_chat_django/`
- `manage.py`: Django ê´€ë¦¬ ì§„ì…ì 
- `settings.py`: í”„ë¡œì íŠ¸ ì„¤ì •
- `urls.py`: URL ë¼ìš°íŒ…
- `chat/`:
  - `consumers.py`: WebSocket(Channels) ì†Œë¹„ì. í´ë¼ì´ì–¸íŠ¸ ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•˜ê³  AI ì‘ë‹µì„ ìƒì„±í•˜ì—¬ ë¸Œë¡œë“œìºìŠ¤íŠ¸
  - `admin_urls.py`, `admin_views.py`: ì–´ë“œë¯¼ ê´€ë ¨ ë¼ìš°íŒ…/ë·°
  - `migrations/`: DB ë§ˆì´ê·¸ë ˆì´ì…˜
  - `templates/`, `management/`, `mysql_backend/`: í…œí”Œë¦¿, ê´€ë¦¬ ì»¤ë§¨ë“œ, DB ë°±ì—”ë“œ ë“±
- `hearth_chat/`:
  - `apps.py`, `adapters.py` ë“±: ì•± ì„¤ì • ë° ì–´ëŒ‘í„° ë¡œì§
- `staticfiles/`, `templates/`: ì •ì /í…œí”Œë¦¿ ìì›
- `test/`: Django ì¸¡ í…ŒìŠ¤íŠ¸ ì½”ë“œ
- `hearth_chat_django_250805_0616/`: ë‚ ì§œê°€ í¬í•¨ëœ ìŠ¤ëƒ…ìƒ·/ë°±ì—… í”„ë¡œì íŠ¸(ì°¸ê³ ìš©)

í•µì‹¬ ì—°ë™ í¬ì¸íŠ¸
- `chat/consumers.py`
  - Lily FastAPIë¡œì˜ í˜¸ì¶œì„ ë‹´ë‹¹
  - í”„ë¡ íŠ¸ì—ì„œ ì „ë‹¬í•œ `client_ai_settings`ë¥¼ ìš°ì„  ì ìš©
  - Private HF Space ëŒ€ì‘: `HF_TOKEN`/`HUGGING_FACE_TOKEN` í™˜ê²½ë³€ìˆ˜ë¥¼ ì½ì–´ `Authorization: Bearer ...` í—¤ë”ë¥¼ ì¶”ê°€í•˜ì—¬ `Lily /generate`, `/rag/generate` í˜¸ì¶œ
  - ì„±ëŠ¥ ìµœì í™”: í”„ë¡¬í”„íŠ¸ ë‹¨ìˆœí™” ë° `max_length` ë™ì  ì ìš©, ìƒì„¸ ë¡œê¹…
- `hearth_chat/settings.py`
  - `LILY_API_URL` í™˜ê²½ë³„ ë¶„ê¸°(ë¡œì»¬/ì„œë²„)
  - CORS/CSRFì— HF Spaces URL í¬í•¨

ì‹¤í–‰(ë¡œì»¬)
```bash
python manage.py runserver 0.0.0.0:8000
```

í™˜ê²½ë³€ìˆ˜(ì„œë²„/ë¡œì»¬ ê³µí†µ ê¶Œì¥)
- `LILY_API_URL`: Lily FastAPI ê¸°ë³¸ URL
- `HF_TOKEN` ë˜ëŠ” `HUGGING_FACE_TOKEN`: Private HF Space ì ‘ê·¼ í† í°(ì„œë²„ì—ì„œ Lily í˜¸ì¶œ ì‹œ ì‚¬ìš©)

---

### Frontend: `hearth_chat_react/`
- `package.json`, `package-lock.json`
- `public/`, `src/`
  - `src/utils/apiConfig.js`: `getLilyApiUrl()`, `LILY_API_URL` ì •ì˜(ë¡œì»¬/í”„ë¡œë•ì…˜ ìë™ ë¶„ê¸°)
  - `src/components/SettingsModal.jsx`, `AISettingsModal.js`: ì‚¬ìš©ì ì„¤ì •ì— `LILY_API_URL` ë°˜ì˜
  - `src/components/GlobalChatInput.jsx`: íŒŒì¼ ì—…ë¡œë“œ ì‹œ Lily APIì— ì§ì ‘ ì—…ë¡œë“œ, WebSocket ì „ì†¡ ì‹œ AI ì„¤ì • í¬í•¨
  - `src/components/chat_box.jsx`: ì´ˆê¸° ì„¤ì •/í‘œì‹œ ë¡œì§

ì‹¤í–‰(ë¡œì»¬)
```bash
npm install
npm start
```

---

### ë°ì´í„° íë¦„(ìš”ì•½)
1) Reactê°€ WebSocketìœ¼ë¡œ Djangoì— ë©”ì‹œì§€ ì „ì†¡(+í˜„ì¬ AI ì„¤ì •)
2) Django `consumers.py`ê°€ ì„¤ì •ì„ í•©ì„±í•˜ê³  Lily FastAPIì— ìš”ì²­
   - í…ìŠ¤íŠ¸/ì´ë¯¸ì§€/RAG ë³„ë¡œ `/generate`, `/rag/generate`, `/document/upload` ë“± í˜¸ì¶œ
   - Private Space: `Authorization: Bearer <HF_TOKEN>` í—¤ë” í•„ìˆ˜
3) ì‘ë‹µì„ WebSocketìœ¼ë¡œ í”„ë¡ íŠ¸ì— ë¸Œë¡œë“œìºìŠ¤íŠ¸

---

### ë°°í¬/ìš´ì˜ íŒ
- Railway(Django): `LILY_API_URL`, `HF_TOKEN` ì„¤ì • ê¶Œì¥
- HF Spaces(Lily): Private ì‹œ í† í° í•„ìˆ˜, CORS í—ˆìš©, ìŠ¤ì¼€ì¼ì— ë”°ë¥¸ ì‘ë‹µì‹œê°„ ì£¼ì˜
- ì¥ì•  ëŒ€ì‘: `consumers.py` ìƒì„¸ ë¡œê¹… í™•ì¸, 4xx/5xx ì‘ë‹µ ë³¸ë¬¸ ì¶œë ¥ìœ¼ë¡œ ì›ì¸ íŒŒì•…




### Hearth Chat Ã— Lily LLM í†µí•© êµ¬ì¡°

Hearth Chat(Railway ë°°í¬)ê³¼ Lily LLM(Hugging Face Spaces, Docker) ê°„ ì—°ë™ êµ¬ì¡°ì™€ ë°ì´í„° íë¦„, í™˜ê²½ë³€ìˆ˜, ì£¼ìš” ì—°ë™ í¬ì¸íŠ¸ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.

---

### ì•„í‚¤í…ì²˜ ê°œìš”
- í´ë¼ì´ì–¸íŠ¸(React) â†” ì„œë²„(Django/Channels) â†” LLM ì„œë²„(FastAPI on HF Spaces)
- ì‹¤ì‹œê°„ ë©”ì‹œì§•ì€ WebSocket(í´ë¼ì´ì–¸íŠ¸ â†” Django), LLM í˜¸ì¶œì€ Django â†’ Lily(FastAPI) HTTPë¡œ ì²˜ë¦¬

ë°ì´í„° íë¦„(ìš”ì•½)
1) ì‚¬ìš©ìê°€ Reactì—ì„œ í…ìŠ¤íŠ¸/íŒŒì¼ ì „ì†¡ â†’ WebSocketìœ¼ë¡œ Django ì „ë‹¬(í”„ë¡ íŠ¸ í˜„ì¬ AI ì„¤ì • ë™ë´‰)
2) Django `chat/consumers.py`ê°€ AI ì„¤ì •ì„ í•©ì„±í•˜ì—¬ Lily FastAPI í˜¸ì¶œ
   - í…ìŠ¤íŠ¸Â·ì´ë¯¸ì§€: `POST /generate`
   - ë¬¸ì„œ ì—…ë¡œë“œ: `POST /document/upload` í›„ `POST /rag/generate`
3) Lilyê°€ ì‘ë‹µ ìƒì„± â†’ Djangoê°€ WebSocketìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë¸Œë¡œë“œìºìŠ¤íŠ¸

---

### í™˜ê²½ë³„ URL ë° ì¸ì¦
- í”„ë¡ íŠ¸ì—”ë“œ
  - `src/utils/apiConfig.js`ì˜ `getLilyApiUrl()`ì´ ë¡œì»¬/í”„ë¡œë•ì…˜ ìë™ ë¶„ê¸°
  - UI ì„¤ì • ëª¨ë‹¬ì—ì„œ ì‚¬ìš©ìë³„ `aiProvider`, `lilyApiUrl`, `lilyModel`, `geminiModel`, `maxTokens` ê´€ë¦¬

- Django(ì„œë²„)
  - `settings.py`ì˜ `LILY_API_URL`(Railway/ë¡œì»¬ ë¶„ê¸°), CORS/CSRFì— HF URL í¬í•¨
  - Private Space ì¸ì¦: `HF_TOKEN` ë˜ëŠ” `HUGGING_FACE_TOKEN` í™˜ê²½ë³€ìˆ˜ë¥¼ ì½ì–´ Lily í˜¸ì¶œ ì‹œ ì•„ë˜ í—¤ë” ìë™ ì²¨ë¶€

```http
Authorization: Bearer <HF_TOKEN>
```

- Lily(FastAPI, HF Spaces)
  - Private Spaceì—ì„œëŠ” í† í° í•„ìˆ˜
  - ëª¨ë¸/í† í¬ë‚˜ì´ì € ë¡œë”©ì—ë„ `HF_TOKEN` ì‚¬ìš©, ìºì‹œ ë””ë ‰í† ë¦¬ ê¶Œí•œ ì„¤ì • í•„ìš”

---

### ì£¼ìš” ì—°ë™ í¬ì¸íŠ¸(ì½”ë“œ)
- í”„ëŸ°íŠ¸ì—”ë“œ
  - `src/utils/apiConfig.js`: `LILY_API_URL` ê¸°ë³¸ê°’ ì œê³µ
  - `GlobalChatInput.jsx`: íŒŒì¼ ì—…ë¡œë“œ ì‹œ Lily URL ì§ì ‘ ì‚¬ìš©, WebSocket ë©”ì‹œì§€ì— AI ì„¤ì • í¬í•¨
  - `SettingsModal.jsx`, `AISettingsModal.js`: ì‚¬ìš©ì ì„¤ì • ì €ì¥/ì ìš©

- Django
  - `chat/consumers.py`: Lily API í˜¸ì¶œë¶€ ë‹¨ì¼í™”, `Authorization` í—¤ë” ìë™ ì²¨ë¶€, í”„ë¡¬í”„íŠ¸ ë‹¨ìˆœí™” ë° `max_length` ë™ì  ì ìš©

- Lily
  - `lily_llm_api/app_v2.py`: `/generate`, `/rag/generate`, `/document/upload` ë“± ì—”ë“œí¬ì¸íŠ¸ ì œê³µ, CPU ìŠ¤ë ˆë“œ ìµœì í™”, ë©€í‹°ëª¨ë‹¬ ê²½ëŸ‰ ì²˜ë¦¬

---

### ìš”ì²­/ì‘ë‹µ ê·œì•½(ëŒ€í‘œ)
- í…ìŠ¤íŠ¸/ì´ë¯¸ì§€ ìƒì„±
  - URL: `<LILY_API_URL>/generate`
  - í—¤ë”: `Authorization: Bearer <HF_TOKEN>`(Private ì‹œ)
  - Body: `multipart/form-data`
    - `prompt`, optional `image1..image4`, `max_length`, `temperature`, `top_p`, `do_sample`

- ë¬¸ì„œ ì—…ë¡œë“œ ë° RAG
  - ì—…ë¡œë“œ: `<LILY_API_URL>/document/upload` (file, user_id, document_id)
  - RAG: `<LILY_API_URL>/rag/generate` (query, user_id, document_id)

---

### ì„±ëŠ¥ ìµœì í™” í•µì‹¬
- Django â†’ Lily í”„ë¡¬í”„íŠ¸ ìµœì†Œí™”(ì¥ë¬¸ í”„ë¦¬í”½ìŠ¤ ì œê±°), `max_length` ì‚¬ìš©ì ì„¤ì • ê¸°ë°˜(ê¸°ë³¸ 20, ìƒí•œ 128)
- Lily ì„œë²„ CPU ìŠ¤ë ˆë“œ í™˜ê²½ ìµœì í™”(`CPU_THREADS`, `OMP_NUM_THREADS`, `MKL_NUM_THREADS`, `NUMEXPR_NUM_THREADS`)
- í…ìŠ¤íŠ¸-only ê²½ë¡œëŠ” íƒìƒ‰ ë¹„í™œì„±í™”(`do_sample=False`)ë¡œ ì§€ì—° ìµœì†Œí™”

---

### ìš´ì˜ ì²´í¬ë¦¬ìŠ¤íŠ¸
- Railway(Django)
  - `LILY_API_URL`, `HF_TOKEN` ì„¤ì •
  - CORS/CSRFì— HF Spaces URL í¬í•¨
- HF Spaces(Lily)
  - Private í”„ë¡œì íŠ¸: `HF_TOKEN` í•„ìˆ˜
  - ìºì‹œ ê¶Œí•œ ë° ë””ìŠ¤í¬ ì—¬ìœ  í™•ì¸, ë¹Œë“œ ë¡œê·¸ì—ì„œ ê¶Œí•œ ì˜¤ë¥˜ ì ê²€
- ê³µí†µ
  - ì‘ë‹µì‹œê°„ ì¦ê°€ ì‹œ: Django ì†Œë¹„ì ë¡œê·¸(ì „ì†¡ í”„ë¡¬í”„íŠ¸/íŒŒë¼ë¯¸í„°), Lily ë¡œê·¸(í† í°í™”/ìƒì„±/ë””ì½”ë“œ ì‹œê°„) êµì°¨ í™•ì¸



===========================================================


# Hearth Chat í´ë” íŠ¸ë¦¬ êµ¬ì¡°

C:\Project\hearth_chat_project\hearth_chat_package\
â”œâ”€â”€ hearth_chat_django\                 # Django + Channels ë°±ì—”ë“œ
â”‚   â”œâ”€â”€ manage.py                        # Django ê´€ë¦¬ ì§„ì…ì 
â”‚   â”œâ”€â”€ settings.py                      # í”„ë¡œì íŠ¸ ì„¤ì •(CORS/CSRF, LILY_API_URL ë“±)
â”‚   â”œâ”€â”€ urls.py                          # URL ë¼ìš°íŒ…
â”‚   â”œâ”€â”€ chat\                            # ì±„íŒ… ì•±
â”‚   â”‚   â”œâ”€â”€ consumers.py                 # WebSocket ì†Œë¹„ì(Lily LLM ì—°ë™ í•µì‹¬)
â”‚   â”‚   â”œâ”€â”€ admin_urls.py, admin_views.py
â”‚   â”‚   â”œâ”€â”€ migrations\
â”‚   â”‚   â”œâ”€â”€ templates\
â”‚   â”‚   â””â”€â”€ mysql_backend\
â”‚   â”œâ”€â”€ hearth_chat\                     # ì•± ì„¤ì •/ì–´ëŒ‘í„°
â”‚   â”œâ”€â”€ staticfiles\, templates\        # ì •ì /í…œí”Œë¦¿ ìì›
â”‚   â”œâ”€â”€ test\                            # ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸
â”‚   â””â”€â”€ hearth_chat_django_YYYYMMDD_...  # ìŠ¤ëƒ…ìƒ·/ë°±ì—… í”„ë¡œì íŠ¸
â”œâ”€â”€ hearth_chat_react\                  # React í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”œâ”€â”€ package.json, package-lock.json
â”‚   â”œâ”€â”€ public\
â”‚   â””â”€â”€ src\
â”‚       â”œâ”€â”€ utils\apiConfig.js          # LILY_API_URL(ë¡œì»¬/í”„ë¡œë•ì…˜ ë¶„ê¸°)
â”‚       â””â”€â”€ components\                 # SettingsModal/AISettingsModal/GlobalChatInput ë“±
â”œâ”€â”€ hearth_chat_media\                  # ì—…ë¡œë“œ/ì •ì  ìì›(í™˜ê²½ì— ë”°ë¼ ê²½ë¡œ ìƒì´)
â”œâ”€â”€ app.js, build.sh, Dockerfile        # ë¹Œë“œ/ë°°í¬ ìŠ¤í¬ë¦½íŠ¸Â·ì„¤ì •
â””â”€â”€ script\                              # í¸ì˜ ìŠ¤í¬ë¦½íŠ¸(cs.sh ë“±)

ì—°ë™ í•µì‹¬
- í”„ë¡ íŠ¸: `apiConfig.js`ì—ì„œ Lily ê¸°ë³¸ URL ê²°ì •, íŒŒì¼ ì—…ë¡œë“œ/ìš”ì²­ì€ Lilyë¡œ ì§ì ‘ ì „ì†¡ ê°€ëŠ¥
- ë°±ì—”ë“œ: `chat/consumers.py`ê°€ WebSocket ë©”ì‹œì§€ ì²˜ë¦¬ í›„ Lily FastAPI í˜¸ì¶œ
  - í…ìŠ¤íŠ¸/ì´ë¯¸ì§€: `POST <LILY_API_URL>/generate` (multipart/form-data)
  - RAG: ì—…ë¡œë“œ `POST /document/upload` â†’ ì§ˆì˜ `POST /rag/generate`
  - Private HF Space: `Authorization: Bearer <HF_TOKEN>` í—¤ë” ìë™ ì²¨ë¶€(í™˜ê²½ë³€ìˆ˜ `HF_TOKEN`/`HUGGING_FACE_TOKEN`)

ìš´ì˜ í¬ì¸íŠ¸
- Railway ë°°í¬ ì‹œ `LILY_API_URL`, `HF_TOKEN` ì„¤ì • ê¶Œì¥
- ëŒ€ê¸°ì‹œê°„ ìµœì í™”: í”„ë¡¬í”„íŠ¸ ìµœì†Œí™”, `max_length`(ê¸°ë³¸ 20, ìƒí•œ 128) ì ìš©
- ë¬¸ì œ ë°œìƒ ì‹œ Django ë¡œê·¸(ìš”ì²­ íŒŒë¼ë¯¸í„°)ì™€ Lily ë¡œê·¸(í† í°í™”/ìƒì„± ì‹œê°„) ë™ì‹œ í™•ì¸
